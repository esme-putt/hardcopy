<%= form_with model: [:admin, @product], local: true do |f| %>
    <% if @product.errors.any? %>
      <div class="alert alert-danger">
        <h5><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h5>
        <ul>
          <% @product.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
  
    <div class="mb-3">
      <%= f.label :title, class: "form-label" %>
      <%= f.text_field :title, class: "form-control", required: true %>
    </div>
  
    <div class="row">
      <div class="col-md-6 mb-3">
        <%= f.label :price, class: "form-label" %>
        <div class="input-group">
          <span class="input-group-text">$</span>
          <%= f.number_field :price, class: "form-control", step: "0.01", min: "0", required: true %>
        </div>
      </div>
      
      <div class="col-md-6 mb-3">
        <%= f.label :original_price, "Original Price (if on sale)", class: "form-label" %>
        <div class="input-group">
          <span class="input-group-text">$</span>
          <%= f.number_field :original_price, class: "form-control", step: "0.01", min: "0" %>
        </div>
      </div>
    </div>
  
    <div class="row">
      <div class="col-md-6 mb-3">
        <%= f.label :stock, class: "form-label" %>
        <%= f.number_field :stock, class: "form-control", min: "0", required: true %>
      </div>
      
      <div class="col-md-6 mb-3">
        <%= f.label :condition, class: "form-label" %>
        <%= f.select :condition, ["New", "Like New", "Excellent", "Good", "Fair"], { include_blank: "Select Condition" }, { class: "form-select" } %>
      </div>
    </div>
  
    <div class="mb-3">
      <div class="form-check">
        <%= f.check_box :featured, class: "form-check-input" %>
        <%= f.label :featured, class: "form-check-label" %>
      </div>
    </div>
  
    <div class="mb-3">
      <%= f.label :description, class: "form-label" %>
      <%= f.rich_text_area :description, class: "form-control" %>
    </div>
  
    <div class="mb-4">
      <%= f.label :images, class: "form-label" %>
      <%= f.file_field :images, multiple: true, class: "form-control" %>
      
      <% if @product.images.attached? %>
        <div class="mt-3">
          <p class="mb-2">Current Images:</p>
          <div class="row g-2">
            <% @product.images.each do |image| %>
              <div class="col-auto">
                <%= image_tag image.variant(resize_to_limit: [100, 100]), class: "img-thumbnail", style: "width: 100px; height: 100px; object-fit: cover;" %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  
    <div class="d-flex gap-2">
      <%= f.submit class: "btn btn-primary" %>
      <%= link_to "Cancel", admin_products_path, class: "btn btn-outline-secondary" %>
    </div>
  <% end %>